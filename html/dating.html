<!DOCTYPE html>
<html lang="en">

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
        <meta content="yes" name="apple-mobile-web-app-capable">
        <meta content="black" name="apple-mobile-web-app-status-bar-style">
        <meta content="telephone=no" name="format-detection">
        <meta content="email=no" name="format-detection">
        <meta name="x5-page-mode" content="app">
        <link rel="stylesheet" href="../css/swiper.min.css">
        <link rel="stylesheet" href="../css/common.css">
        <link rel="stylesheet" href="../css/newIndex.css">
        <link rel="stylesheet" href="../css/dating.css">
        <link rel="stylesheet" href="../css/footer.css">
        <title>Paopao相亲</title>
    </head>

    <body>
        <div id="app" v-if="init">
            <div id="global-wrapper">
                <!-- 板块导航 -->
                <nav class="block-nav global-flex global-box anim">
                    <a href="javascript:;" class="block-nav-item" :class="{'block-nav-active':blockNavIndex === 0}"
                        @click.stop="switchBlockNav(0)">
                        推荐
                    </a>
                    <a href="javascript:;" class="block-nav-item" :class="{'block-nav-active':blockNavIndex === 1}"
                        @click.stop="switchBlockNav(1)">
                        附近的人
                    </a>
                    <a href="./search.html" class="block-nav-item">
                        搜索
                    </a>
                    <button class="global-btn recommend-nav-btn">
                        我要曝光
                        <img src="../img/icon-hot.png" class="recommend-tag">
                    </button>
                </nav>
                <!-- 板块内容 -->
                <main id="main">
                    <!-- 板块轮播 -->
                    <div class="swiper-container paopao-block-swiper">
                        <div class="swiper-wrapper">
                            <div class="swiper-slide paopao-block">
                                <ul class="paopao-list global-clearfix">
                                    <li class="paopao-item">
                                        <div class="paopao-item-cover">
                                            <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                class="global-img">
                                        </div>
                                        <div class="global-flex global-flex-center paopao-item-name-wrapper">
                                            <h3 class="paopao-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                            <div class="global-tag">
                                                VIP <i class="global-tag-text global-bg-orange">VIP</i>
                                            </div>
                                        </div>
                                        <div class="global-flex global-flex-wrap paopao-item-type">
                                            <!-- 男 global-sexual-man -->
                                            <div class="global-bg-blue global-sexual-woman">
                                                <svg class="global-icon-sexual">
                                                    <use xlink:href="../img/global.svg#icon-female"></use>
                                                </svg>
                                                <i class="global-sexual-text">20</i>
                                            </div>
                                            <div class="global-tag">
                                                182cm<i class="global-tag-text">182cm</i>
                                            </div>
                                            <div class="global-tag">
                                                月薪12000<i class="global-tag-text">月薪12000</i>
                                            </div>
                                            <div class="global-tag">
                                                幽默<i class="global-tag-text">幽默</i>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="paopao-item">
                                        <div class="paopao-item-cover">
                                            <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                class="global-img">
                                        </div>
                                        <div class="global-flex global-flex-center paopao-item-name-wrapper">
                                            <h3 class="paopao-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                            <div class="global-tag">
                                                推荐 <i class="global-tag-text global-bg-light-pink">推荐</i>
                                            </div>
                                        </div>
                                        <div class="global-flex global-flex-wrap paopao-item-type">
                                            <div class="global-sexual-man">
                                                <svg class="global-icon-sexual">
                                                    <use xlink:href="../img/global.svg#icon-man"></use>
                                                </svg>
                                                <i class="global-sexual-text">20</i>
                                            </div>
                                            <div class="global-tag">
                                                182cm<i class="global-tag-text">182cm</i>
                                            </div>
                                            <div class="global-tag">
                                                幽默<i class="global-tag-text">幽默</i>
                                            </div>
                                            <div class="global-tag">
                                                月薪12000<i class="global-tag-text">月薪12000</i>
                                            </div>
                                            <div class="global-tag">
                                                月薪12000<i class="global-tag-text">月薪12000</i>
                                            </div>
                                            <div class="global-tag">
                                                月薪12000<i class="global-tag-text">月薪12000</i>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                                <!-- 正在加载中 -->
                                <img src="../img/loading.svg" class="loading-list-icon" v-show="isLoadingArr[blockNavIndex] && !loadAll[blockNavIndex]">
                                <!-- 加载全部 -->
                                <p class="loading-all">已阅尽所有好看的灵魂~</p>
                            </div>
                            <div class="swiper-slide paopao-block">
                                    <ul class="paopao-surround-list global-clearfix">
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <div class="global-flex global-flex-center">
                                                        <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                        <span class="global-align-right font-10 font-999">1.6km</span>
                                                    </div>
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-man">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-man"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                        <div class="global-tag paopao-vip-tag">
                                                            VIP<div class="global-tag-text">
                                                                VIP
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-woman">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-female"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <div class="global-flex global-flex-center">
                                                        <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                        <span class="global-align-right font-10 font-999">1.6km</span>
                                                    </div>
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-woman">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-female"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <div class="global-flex global-flex-center">
                                                        <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                        <span class="global-align-right font-10 font-999">1.6km</span>
                                                    </div>
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-woman">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-female"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <div class="global-flex global-flex-center">
                                                        <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                        <span class="global-align-right font-10 font-999">1.6km</span>
                                                    </div>
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-woman">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-female"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <div class="global-flex global-flex-center">
                                                        <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                        <span class="global-align-right font-10 font-999">1.6km</span>
                                                    </div>
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-woman">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-female"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <div class="global-flex global-flex-center">
                                                        <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                        <span class="global-align-right font-10 font-999">1.6km</span>
                                                    </div>
            
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-woman">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-female"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                            <li class="paopao-surround-item global-flex global-border global-border-bottom">
                                                <div class="paopao-surround-item-cover">
                                                    <img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1543333345155&di=1ed82f3b374af9b7eb988123bea26d8b&imgtype=0&src=http%3A%2F%2Fuploads.5068.com%2Fallimg%2F1801%2F151P42a2-4.jpg"
                                                        class="global-img">
                                                </div>
                                                <div class="global-flex-1">
                                                    <h3 class="paopao-surround-item-username font-ellipsis font-ellipsis-1">呵呵呵呵呵呵呵</h3>
                                                    <div class="global-flex paopao-surround-tag-wrapper">
                                                        <div class="global-sexual-woman">
                                                            <svg class="global-icon-sexual">
                                                                <use xlink:href="../img/global.svg#icon-female"></use>
                                                            </svg>
                                                            <i class="global-sexual-text">20</i>
                                                        </div>
                                                    </div>
                                                    <p class="paopao-surround-text font-ellipsis font-ellipsis-1">叽叽喳喳呵呵哈哈哈呵呵呵呵呵oooooooo啊啊啊啊hehehhe</p>
                                                </div>
                                            </li>
                                        </ul>
                                <!-- 正在加载中 -->
                                <img src="../img/loading.svg" class="loading-list-icon" v-show="isLoadingArr[blockNavIndex] && !loadAll[blockNavIndex]">
                                <!-- 加载全部 -->
                                <p class="loading-all">已阅尽所有好看的灵魂~</p>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
            <footer id="footer">
                <nav class="global-flex footer-item-wrapper">
                    <li class="global-flex-1 global-flex global-flex-justify-center global-flex-column footer-item">
                        <a href="./newIndex.html">
                            <svg class="icon-footer" aria-hidden="true">
                                <use xlink:href="../img/global.svg#icon-index"></use>
                            </svg>
                            <p>首页</p>
                        </a>
                    </li>
                    <li class="global-flex-1 global-flex global-flex-justify-center global-flex-column footer-item footer-active">
                        <a href="javascript:void(0);">
                            <svg class="icon-footer" aria-hidden="true">
                                <use xlink:href="../img/global.svg#icon-date"></use>
                            </svg>
                            <p>相亲</p>
                        </a>
                    </li>
                    <li class="global-flex-1 global-flex global-flex-justify-center global-flex-column footer-item">
                        <a href="">
                            <svg class="icon-footer" aria-hidden="true">
                                <use xlink:href="../img/global.svg#icon-message"></use>
                            </svg>
                            <p>信息</p>
                        </a>
                    </li>
                    <li class="global-flex-1 global-flex global-flex-justify-center global-flex-column footer-item">
                        <a href="./my.html">
                            <svg class="icon-footer" aria-hidden="true">
                                <use xlink:href="../img/global.svg#icon-my"></use>
                            </svg>
                            <p>我的</p>
                        </a>
                    </li>
                </nav>
            </footer>
        </div>
    </body>
    <script src="../js/vue.min.js"></script>
    <script src="../js/swiper.js"></script>
    <script src="https://cdn.bootcss.com/vConsole/3.2.0/vconsole.min.js"></script>
    <script type="text/javascript">
        var vConsole = new VConsole();
    </script>
    <script>
        // 防节流
        function throttle(interval) {
            var timer,
                startTime = +new Date();
            return function (fn) {
                var currentTime = +new Date();
                clearTimeout(timer);
                if (currentTime - startTime >= interval) {
                    timer = setTimeout(function () {
                        fn && fn()
                        startTime = currentTime;
                    }, interval)
                } else {
                    timer = setTimeout(function () {
                        fn && fn()
                    }, interval)
                }
            }
        }

        var app = new Vue({
            el: '#app',
            data: function () {
                return {
                    init: false,
                    blockNavIndex: 0,
                    isLoadingArr: [false, false],
                    loadAll: [false, false]
                }
            },
            mounted: function () {
                this.init = true;
                this.$nextTick(function () {
                    this.initSwiper();
                    this.globalScroll()
                })
            },
            methods: {
                // 初始化swiper
                initSwiper: function () {
                    var self = this;
                    this.blockSwiper = new Swiper('.paopao-block-swiper', {
                        autoplayDisableOnInteraction: false,
                        loop: false,
                        autoplay: false,
                        speed: 500,
                        onSlideChangeStart: function (swiper) {
                            self.blockNavIndex = swiper.activeIndex
                        }
                    })
                    this.paopaoBlock = document.querySelectorAll('.paopao-block')
                },
                // 全局滚动
                globalScroll: function () {
                    var block = this.paopaoBlock[this.blockNavIndex],
                        startY = 0,
                        self = this,
                        throttleInner = throttle(16.7);


                    block.addEventListener('scroll', function (e) {
                        throttleInner(function () {
                            if (!self.isLoadingArr[self.blockNavIndex] && !self.loadAll[
                                    self.blockNavIndex]) {
                                if (e.target.scrollTop + e.target.clientHeight + 128 >= e.target
                                    .scrollHeight) {
                                    self.loadPaoPaoItem()
                                }
                            }
                        })
                    })
                },
                loadPaoPaoItem: function () {
                    console.log('加载数据')
                },
                // 板块切换
                switchBlockNav: function (e) {
                    if (e !== this.blockNavIndex) {
                        this.blockNavIndex = e;
                        this.blockSwiper.slideTo(this.blockNavIndex, 500, false)
                        this.globalScroll()
                    }
                }
            }
        })
    </script>

</html>